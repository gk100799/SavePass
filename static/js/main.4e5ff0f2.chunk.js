(this.webpackJsonpsavepass=this.webpackJsonpsavepass||[]).push([[0],{211:function(e,t,n){e.exports=n(378)},216:function(e,t,n){},217:function(e,t,n){},218:function(e,t,n){},220:function(e,t,n){},369:function(e,t,n){},370:function(e,t,n){},374:function(e,t,n){},378:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(11),c=n.n(o),s=(n(216),n(100)),l=n(30),u=(n(217),n(218),n(43)),i=n.n(u),m=n(9),d=n(64),f=n(6),p=n(52),E=n(8),g=n(408),b=n(409),h=n(406),v=n(410),w=n(405),y=(n(220),n(128)),O=n.n(y),j="http://localhost:4000",I=O.a.create({baseURL:j,timeout:1e4}),U=O.a.create({baseURL:j,headers:{"Content-Type":"application/json","auth-token":"".concat(localStorage.getItem("token"))},timeout:1e4}),x=O.a.create({baseURL:j,headers:{"Content-Type":"multipart/form-data"}});U.interceptors.request.use((function(e){return e}),(function(e){return Promise.reject(e)})),U.interceptors.response.use((function(e){return e}),(function(e){return 408!==e.response.status&&"ECONNABORTED"!==e.code||console.log("A timeout happend on url ".concat(e.config.url)),401!==e.response.status&&"Unauthorized"!==e.code||(window.location.href=""),e})),I.interceptors.request.use((function(e){return e}),(function(e){return Promise.reject(e)})),I.interceptors.response.use((function(e){return e}),(function(e){return 408!==e.response.status&&"ECONNABORTED"!==e.code||console.log("A timeout happend on url ".concat(e.config.url)),401!==e.response.status&&"Unauthorized"!==e.code||(window.location.href="login"),e})),x.interceptors.request.use((function(e){return e}),(function(e){return Promise.reject(e)})),x.interceptors.response.use((function(e){return e}),(function(e){return Promise.reject(e)}));var S=n(74),_=function(e){var t=e.editing,n=e.dataIndex,a=e.title,o=e.inputType,c=(e.record,e.index,e.children),s=Object(E.a)(e,["editing","dataIndex","title","inputType","record","index","children"]),l="number"===o?r.a.createElement(g.a,null):r.a.createElement(b.a,null);return r.a.createElement("td",s,t?r.a.createElement(h.a.Item,{name:n,style:{margin:0},rules:[{required:!0,message:"Please Input ".concat(a,"!")}]},l):c)};var k=Object(S.b)((function(e,t){return console.log(e.users),{users:e.users,otherProps:t}}))((function(e){var t=e.users,n=e.deleteUser;console.log(t);var o=h.a.useForm(),c=Object(p.a)(o,1)[0],s=Object(a.useState)(t),l=Object(p.a)(s,2),u=l[0],E=l[1],g=Object(a.useState)(""),b=Object(p.a)(g,2),y=b[0],O=b[1];Object(a.useEffect)((function(){E(t)}),[t]);var j=function(e){return e._id===y},I=function(){O("")},x=function(){var e=Object(d.a)(i.a.mark((function e(t){var n,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c.validateFields();case 3:n=e.sent,a={_id:t,name:n.name,username:n.username,password:n.password},U.post("account/modify",a).then((function(e){var a=Object(m.a)(u),r=a.findIndex((function(e){return t===e._id}));if(r>-1){var o=a[r];a.splice(r,1,Object(f.a)(Object(f.a)({},o),n)),E(a),O("")}else a.push(n),E(a),O("")})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log("Validate Failed:",e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),S=[{title:"Name",dataIndex:"name",width:"20%",editable:!0,sorter:function(e,t){return e.name.localeCompare(t.name)}},{title:"Username",dataIndex:"username",width:"25%",editable:!0},{title:"Password",dataIndex:"password",width:"20%",editable:!0},{title:"Operations",width:"20%",dataIndex:"operation",render:function(e,t){return j(t)?r.a.createElement("span",null,r.a.createElement("a",{onClick:function(){return x(t._id)},style:{marginRight:8}},"Save"),r.a.createElement(v.a,{title:"Sure to cancel?",onConfirm:I},r.a.createElement("a",null,"Cancel"))):r.a.createElement(r.a.Fragment,null,r.a.createElement("a",{disabled:""!==y,onClick:function(){return function(e){c.setFieldsValue(Object(f.a)({username:"",password:"",name:""},e)),O(e._id)}(t)}},"Edit"),r.a.createElement("span",{style:{whiteSpace:"pre"}},"                "),r.a.createElement(v.a,{title:"Sure to delete?",onConfirm:function(){return e=t._id,void U.post("account/delete",{_id:e}).then((function(t){return n(e)}));var e}},r.a.createElement("a",null,"Delete")))}}].map((function(e){return e.editable?Object(f.a)(Object(f.a)({},e),{},{onCell:function(t){return{record:t,inputType:"text",dataIndex:e.dataIndex,title:e.title,editing:j(t)}}}):e}));return r.a.createElement("div",{className:"table"},r.a.createElement(h.a,{form:c,component:!1},r.a.createElement(w.a,{components:{body:{cell:_}},bordered:!0,dataSource:u,columns:S,rowClassName:"editable-row"})))})),N=n(47);n(369);function R(e){var t=e.addUser,n=h.a.useForm(),a=Object(p.a)(n,1)[0];return r.a.createElement("div",{className:"form"},r.a.createElement("h3",{style:{marginTop:"3px",marginRight:"30px"}},"Add Item:"),r.a.createElement(h.a,{form:a,layout:"inline",name:"addUser",onFinish:function(e){console.log(e);var n={name:e.name,username:e.username,password:e.password};U.post("/account/add",n).then((function(e){return t(n)})),a.resetFields()},validateMessages:{required:"${label} is required!",types:{email:"${label} is not validate email!",number:"${label} is not a validate number!"},number:{range:"${label} must be between ${min} and ${max}"}}},r.a.createElement(h.a.Item,{name:["name"],label:"Name",rules:[{required:!0}]},r.a.createElement(b.a,null)),r.a.createElement(h.a.Item,{name:["username"],label:"Username",rules:[{required:!0}]},r.a.createElement(b.a,null)),r.a.createElement(h.a.Item,{name:["password"],label:"Password",rules:[{required:!0}]},r.a.createElement(b.a,null)),r.a.createElement(h.a.Item,null,r.a.createElement(N.a,{type:"primary",htmlType:"submit"},"Submit"))))}var C=n(399),P=n(411),T=n(401),q=n(403),D=n(404),L=n(402),F=n(196),A=n.n(F),$=(n(370),Object(C.a)((function(e){return{root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1}}})));var B=Object(l.e)((function(e){var t=$();return r.a.createElement("div",{className:t.root},r.a.createElement(P.a,{position:"static"},r.a.createElement(T.a,null,r.a.createElement(L.a,{edge:"start",className:t.menuButton,color:"inherit","aria-label":"menu"},r.a.createElement(A.a,null)),r.a.createElement(q.a,{variant:"h6",className:t.title},"SavePass"),r.a.createElement(D.a,{onClick:function(){localStorage.removeItem("token"),e.history.push("/")},color:"inherit"},"Logout"))))})),G=Object(S.b)((function(e){return console.log(e.loggedIn),{loggedIn:e.loggedIn}}),(function(e){return{deleteUser:function(t){e(function(e){return{type:"DELETE_USER",_id:e}}(t))},addUser:function(t){e(function(e){return{type:"ADD_USER",user:e}}(t))},setUsers:function(t){e(function(e){return{type:"SET_USERS",users:e}}(t))}}}))((function(e){return Object(a.useEffect)((function(){localStorage.getItem("token")?U.get("account/").then((function(t){e.setUsers(t.data)})):e.history.push("/")}),[e]),r.a.createElement("div",{className:"App"},r.a.createElement(B,null),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(R,{addUser:e.addUser}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(k,{deleteUser:e.deleteUser}))})),V=n(407),z=n(412),J=n(413),M=(n(374),Object(S.b)((function(e){return{}}),(function(e){return{loggedUser:function(t){e(function(e){return{type:"LOGGED_USER",data:e}}(t))}}}))((function(e){Object(a.useEffect)((function(){localStorage.getItem("token")&&U.get("user/login/currentUser/").then((function(t){return e.history.push("/home")}))}),[]);return r.a.createElement(h.a,{name:"normal_login",className:"login-form",initialValues:{remember:!0},onFinish:function(t){console.log("Received values of form: ",t);var n={username:t.username,password:t.password};I.post("/user/login/",n).then(function(){var t=Object(d.a)(i.a.mark((function t(n){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,localStorage.setItem("token",n.data.token);case 2:e.loggedUser({name:n.data.name,loggedIn:!0});case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).then((function(t){return e.history.push("/home")})).then((function(e){return V.b.success("Logged in successfully!")})).then((function(e){return console.log("Logged In")})).catch((function(e){return V.b.error("Invalid Credentials")}))}},r.a.createElement(h.a.Item,{name:"username",rules:[{required:!0,message:"Please input your Username!"}]},r.a.createElement(b.a,{prefix:r.a.createElement(z.a,{className:"site-form-item-icon"}),placeholder:"Username"})),r.a.createElement(h.a.Item,{name:"password",rules:[{required:!0,message:"Please input your Password!"}]},r.a.createElement(b.a,{prefix:r.a.createElement(J.a,{className:"site-form-item-icon"}),type:"password",placeholder:"Password"})),r.a.createElement(h.a.Item,null,r.a.createElement(N.a,{type:"primary",htmlType:"submit",className:"login-form-button"},"Log in")))}))),W=function(e){return r.a.createElement(s.a,{basename:"/SavePass"},r.a.createElement(l.a,{path:"/home",exact:!0,component:G}),r.a.createElement(l.a,{path:"/",exact:!0,component:M}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var H=n(115),K={users:[],loggedIn:!1,name:""};n(377);var Q=Object(H.b)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K,t=arguments.length>1?arguments[1]:void 0;if("DELETE_USER"===t.type){var n=e.users.filter((function(e){return t._id!==e._id}));return Object(f.a)(Object(f.a)({},e),{},{users:n})}if("ADD_USER"===t.type){var a=t.user;return console.log(a),a._id=Math.random(),Object(f.a)(Object(f.a)({},e),{},{users:[].concat(Object(m.a)(e.users),[a])})}return"LOGGED_USER"===t.type?(console.log(t.data),Object(f.a)(Object(f.a)({},e),{},{loggedIn:t.data.loggedIn,name:t.data.name})):"SET_USERS"===t.type?(console.log(t.users,"yeah here you are"),Object(f.a)(Object(f.a)({},e),{},{users:t.users})):e}));c.a.render(r.a.createElement(S.a,{store:Q},r.a.createElement(W,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[211,1,2]]]);
//# sourceMappingURL=main.4e5ff0f2.chunk.js.map